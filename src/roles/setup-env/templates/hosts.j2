
# Ansible inventory (AKA "hosts") file
#
# https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html
#
# Tell Ansible to use a local connection for localhost
all:
  hosts:
    localhost:
      ansible_connection: local

  children:
    load_balancers:
      hosts:
{% for server in load_balancers %}
        {{ server }}:
{% endfor %}
    app_servers:
      hosts:
{% for server in app_servers %}
        {{ server }}:
{% endfor %}
    memcached_servers:
      hosts:
{% for server in memcached_servers %}
        {{ server }}:
{% endfor %}
    db_master:
      hosts:
        {{ db_master }}:

    # Note: db_slaves needs to be in the form:
    #   1.2.3.4:
    #     mysql_server_id: 2   # ids must be unique and greater than 1
    db_slaves:
      hosts:
{% for server in db_slaves %}
        {{ server }}:
          mysql_server_id: {{ loop.index + 1 }}
{% endfor %}
    elastic_servers:
      hosts:
{% for server in elastic_servers %}
        {{ server }}:
{% endfor %}
    backup_servers:
      hosts:
{% for server in backup_servers %}
        {{ server }}:
{% endfor %}
    logging_servers:
      hosts:
{% for server in logging_servers %}
        {{ server }}:
{% endfor %}
